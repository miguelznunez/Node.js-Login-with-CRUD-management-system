<%- include("partial-views/header.ejs") %>
<%- include("partial-views/navbar.ejs") %>

  <div class="app">

    <%- include("partial-views/sidebar-menu.ejs") %>

    <% if (typeof message=="undefined" ) { %>

      <main class="content">

        <div class="flex">
          <h3><i class="fa-solid fa-users"></i><span>Users -> View Active</span></h3>
          <div>
            <button><a href="/user-management/user-views/active-users"><i class="fa-solid fa-eye"></i> All Active Users</a></button>
            <button><a href="/user-management/user-views/add-user"><i class="fa-solid fa-plus"></i> Add User</a></button>
          </div>
        </div>

        <br>

        <% if(typeof flash !="undefined" && flash !="" ) { %>
          <div class="server-message success">
            <%= flash %>
          </div>
          <br>
        <% } %>

        <h4>Active users (<%= result.length %>)</h4>

        <br>
        
        <form action="/user-management/user-views/search-active-users" method="POST">
          <div class="user-management">
            <input type="text" name="search" placeholder="Search active users..."><button>Search</button>
          </div>
        </form>

        <br>
        
        <table>
          <tr>
            <th>id</th>
            <th>First</th>
            <th>Email</th>
            <th>Status</th>
            <th class="text-end">Action</th>
          </tr>
          <% for(let i=0;i < result.length;i++) { %>
            <tr>
              <td>
                <%= result[i].id %>
              </td>
              <td>
                <%= result[i].fName %> 
              </td>
              <td>
                <%= result[i].email %>
              </td>
              <td>
                <%= result[i].status %>
              </td>
              <td class="text-end">
                <a href="/user-management/user-views/view-user/<%= result[i].id %>"><i class="fa-solid fa-eye"></i> View</a>
                <% if(user.id !=result[i].id) { %>
                <a href="/user-management/user-views/edit-user/<%= result[i].id %>"><i class="fa-solid fa-pencil"></i> Edit</a>
                <% } %>
              </td>
            </tr>
          <% } %>
        </table>
      </main>

    <% } else { %>

      <main class="content">

        <div class="server-message error">
          <%= message %>
        </div>

      </main>

    <% } %>

  </div>

  <script src="/js/navbar.js"></script>
  <script src="/js/sidebar-menu.js"></script>

<%- include("partial-views/footer.ejs") %>